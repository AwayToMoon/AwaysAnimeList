<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aways Anime List</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  
 <!-- Firebase SDK -->
  <script src="config.js"></script>
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, doc, getDocs, addDoc, updateDoc, deleteDoc, onSnapshot, query, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
    
    // Firebase-Konfiguration wird aus config.js geladen
    const firebaseConfig = window.firebaseConfig;
    
    // Firebase initialisieren
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    
    // Globale Firebase-Funktionen verfÃ¼gbar machen
    window.firebase = {
      db,
      collection,
      doc,
      getDocs,
      addDoc,
      updateDoc,
      deleteDoc,
      onSnapshot,
      query,
      orderBy
    };
  </script>
</head>
<body>
  <div class="app">
    <header class="header">
      <h1>Aways Anime List</h1>
      <div class="stats">
        <div class="stat-item">
          <span class="stat-number" id="total-count">0</span>
          <span class="stat-label">Gesamt</span>
        </div>
        <div class="stat-item">
          <span class="stat-number" id="watched-count">0</span>
          <span class="stat-label">Angeschaut</span>
        </div>
        <div class="stat-item">
          <span class="stat-number" id="plan-count">0</span>
          <span class="stat-label">Geplant</span>
        </div>
        <div class="stat-item">
          <span class="stat-number" id="waiting-count">0</span>
          <span class="stat-label">Warten</span>
        </div>
      </div>
      <div class="header-actions">
        <button id="theme-toggle" class="btn theme" aria-label="Theme wechseln" title="Theme wechseln">ðŸŒ™</button>
        <button id="admin-toggle" class="btn admin" aria-label="Admin anmelden" title="Admin anmelden">ðŸ”’ Admin</button>
      </div>
    </header>

    <section class="add-form">
      <form id="anime-form" autocomplete="off">
        <div class="field-group">
          <input id="anime-input" type="text" placeholder="Anime-Name eingeben..." required>
          <select id="anime-list-select" aria-label="Liste wÃ¤hlen">
            <option value="plan">Noch am anschauen</option>
            <option value="watched">Fertig Geschaut</option>
            <option value="waiting">Warten auf Fortsetzung</option>
          </select>
          <button type="submit" class="btn primary">HinzufÃ¼gen</button>
        </div>
        <small class="hint">Nur Admins kÃ¶nnen hinzufÃ¼gen.</small>
      </form>
      <div id="message" role="status" aria-live="polite"></div>
    </section>

    <nav class="tabs" role="tablist">
      <button class="tab active" role="tab" aria-selected="true" data-tab="plan">Noch am anschauen</button>
      <button class="tab" role="tab" aria-selected="false" data-tab="watched">Fertig Geschaut</button>
      <button class="tab" role="tab" aria-selected="false" data-tab="waiting">Warten auf Fortsetzung</button>
    </nav>

    <main class="content">
      <section id="tab-plan" class="tab-panel active" role="tabpanel" aria-label="Noch am anschauen">
        <div id="grid-plan" class="grid"></div>
      </section>
      <section id="tab-watched" class="tab-panel" role="tabpanel" aria-label="Fertig Geschaut">
        <div id="grid-watched" class="grid"></div>
      </section>
      <section id="tab-waiting" class="tab-panel" role="tabpanel" aria-label="Warten auf Fortsetzung">
        <div id="grid-waiting" class="grid"></div>
      </section>
    </main>

    <footer class="footer">
    </footer>
  </div>

  <!-- Edit Modal -->
  <div id="edit-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Titel bearbeiten</h3>
        <button class="modal-close" aria-label="SchlieÃŸen">&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-cover">
          <img id="modal-cover-img" src="" alt="" class="modal-cover-image">
        </div>
        <div class="modal-form">
          <div class="modal-field">
            <label for="modal-title-input">Anime-Titel:</label>
            <input type="text" id="modal-title-input" placeholder="Titel eingeben...">
          </div>
          <div class="modal-field">
            <label for="modal-link-input">Link (optional):</label>
            <input type="url" id="modal-link-input" placeholder="https://myanimelist.net/anime/...">
          </div>
          <div class="modal-actions">
            <button type="button" class="btn secondary" id="modal-cancel">Abbrechen</button>
            <button type="button" class="btn primary" id="modal-save">Speichern</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin Modal -->
  <div id="admin-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Admin-Anmeldung</h3>
        <button class="modal-close" data-close-admin aria-label="SchlieÃŸen">&times;</button>
      </div>
      <div class="modal-body">
        <div class="modal-form" style="width:100%">
          <label for="admin-password">Passwort:</label>
          <input type="password" id="admin-password" placeholder="Admin-Passwort">
          <div class="modal-actions">
            <button type="button" class="btn secondary" id="admin-cancel">Abbrechen</button>
            <button type="button" class="btn primary" id="admin-login">Anmelden</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>

